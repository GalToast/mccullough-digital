{"version":3,"file":"blocks/services/editor.js","mappings":"mBAAA,MAAM,EAA+BA,OAAW,GAAU,OCApD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAe,Y,6hCCAzD,EAA+BA,OAAwB,gB,MCQ7D,MACIC,aACIC,cAAeC,EAAuB,CAClC,eACA,kCACA,6BAEJC,SAAUC,EAAmB,CACzB,CACI,eACA,CACIC,MAAO,EACPC,UAAW,gBACXC,aAAaC,EAAAA,EAAAA,IAAG,yBAA0B,sBAC1CC,QAAgD,QAAzCC,EAAEC,GAAUC,YAAYC,UAAUC,eAAO,IAAAJ,EAAAA,GAAIF,EAAAA,EAAAA,IAAG,aAAc,wBAG7E,CAAC,mCACD,CAAC,mCACD,CAAC,oCAELO,aAAcC,GAAuB,GACrC,CAAC,GACLL,GAEJM,EAAAA,EAAAA,mBAAkBN,EAAAA,KAAe,IAC1BA,EACHO,IAAAA,EAAK,WAAEN,EAAU,SAAEO,IAAY,IAAAC,EAC3B,MAAM,SAAEP,GAAaD,EACfS,GAAaC,EAAAA,EAAAA,iBACbC,GAAmBC,EAAAA,EAAAA,SAAO,IAE1B,YAAExB,EAAc,KAAOyB,EAAAA,EAAAA,WACxBC,IAAM,CACH1B,YAAa0B,EAAO,qBAAqBC,UAAUR,KAEvD,CAACA,KAGC,aAAES,IAAiBC,EAAAA,EAAAA,aAAY,qBAC/BC,EAAyD,QAA1CV,EAAGT,GAAUC,YAAYC,UAAUC,eAAO,IAAAM,EAAAA,EAAI,GAmCnE,OAjCAW,EAAAA,EAAAA,WAAU,KACN,GAAIR,EAAiBS,QACjB,OAGJ,IAAKC,MAAMC,QAAQlC,GACf,OAKJ,GAFmBA,EAAYmC,KAAMC,GAAyB,iBAAfA,EAAMC,MAIjD,YADAd,EAAiBS,SAAU,GAI/B,MAAMM,EAAmBzB,GAAYiB,EAErC,IAAKQ,EAED,YADAf,EAAiBS,SAAU,GAI/B,MAAMO,GAAeC,EAAAA,EAAAA,aAAY,eAAgB,CAC7CnC,MAAO,EACPC,UAAW,gBACXG,QAAS6B,IAGbV,EAAaW,EAAc,EAAGpB,GAAU,GACxCI,EAAiBS,SAAU,GAC5B,CAACb,EAAUW,EAAiBjB,EAAUb,EAAa4B,KAGlDa,EAAAA,EAAAA,KAAA,cAAapB,EAAUqB,UACnBD,EAAAA,EAAAA,KAAA,OAAKnC,UAAU,YAAWoC,UACtBD,EAAAA,EAAAA,KAACE,EAAAA,YAAW,CACR1C,cAAgBC,EAChBC,SAAWC,EACXW,aAAeC,OAKnC,EACA4B,KAAIA,KACOH,EAAAA,EAAAA,KAACE,EAAAA,YAAYE,QAAO,K","sources":["webpack://mccullough-digital-theme/external window [\"wp\",\"blocks\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"i18n\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"element\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"data\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"blockEditor\"]","webpack://mccullough-digital-theme/external window \"ReactJSXRuntime\"","webpack://mccullough-digital-theme/./blocks/services/editor.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","import { registerBlockType, createBlock } from '@wordpress/blocks';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useEffect, useRef } from '@wordpress/element';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useBlockProps, InnerBlocks } from '@wordpress/block-editor';\r\n\r\nimport metadata from './block.json';\r\n\r\nconst {\r\n    innerBlocks: {\r\n        allowedBlocks: allowedServiceBlocks = [\r\n            'core/heading',\r\n            'mccullough-digital/service-card',\r\n            'mccullough-digital/button',\r\n        ],\r\n        template: servicesTemplate = [\r\n            [\r\n                'core/heading',\r\n                {\r\n                    level: 2,\r\n                    className: 'section-title',\r\n                    placeholder: __('Add services headlineâ€¦', 'mccullough-digital'),\r\n                    content: metadata?.attributes?.headline?.default ?? __('What We Do', 'mccullough-digital'),\r\n                },\r\n            ],\r\n            ['mccullough-digital/service-card'],\r\n            ['mccullough-digital/service-card'],\r\n            ['mccullough-digital/service-card'],\r\n        ],\r\n        templateLock: servicesTemplateLock = false,\r\n    } = {},\r\n} = metadata;\r\n\r\nregisterBlockType(metadata.name, {\r\n    ...metadata,\r\n    edit({ attributes, clientId }) {\r\n        const { headline } = attributes;\r\n        const blockProps = useBlockProps();\r\n        const hasSeededHeading = useRef(false);\r\n\r\n        const { innerBlocks = [] } = useSelect(\r\n            (select) => ({\r\n                innerBlocks: select('core/block-editor').getBlocks(clientId),\r\n            }),\r\n            [clientId]\r\n        );\r\n\r\n        const { insertBlocks } = useDispatch('core/block-editor');\r\n        const defaultHeadline = metadata?.attributes?.headline?.default ?? '';\r\n\r\n        useEffect(() => {\r\n            if (hasSeededHeading.current) {\r\n                return;\r\n            }\r\n\r\n            if (!Array.isArray(innerBlocks)) {\r\n                return;\r\n            }\r\n\r\n            const hasHeading = innerBlocks.some((block) => block.name === 'core/heading');\r\n\r\n            if (hasHeading) {\r\n                hasSeededHeading.current = true;\r\n                return;\r\n            }\r\n\r\n            const resolvedHeadline = headline || defaultHeadline;\r\n\r\n            if (!resolvedHeadline) {\r\n                hasSeededHeading.current = true;\r\n                return;\r\n            }\r\n\r\n            const headingBlock = createBlock('core/heading', {\r\n                level: 2,\r\n                className: 'section-title',\r\n                content: resolvedHeadline,\r\n            });\r\n\r\n            insertBlocks(headingBlock, 0, clientId, false);\r\n            hasSeededHeading.current = true;\r\n        }, [clientId, defaultHeadline, headline, innerBlocks, insertBlocks]);\r\n\r\n        return (\r\n            <section {...blockProps}>\r\n                <div className=\"container\">\r\n                    <InnerBlocks\r\n                        allowedBlocks={ allowedServiceBlocks }\r\n                        template={ servicesTemplate }\r\n                        templateLock={ servicesTemplateLock }\r\n                    />\r\n                </div>\r\n            </section>\r\n        );\r\n    },\r\n    save() {\r\n        return <InnerBlocks.Content />;\r\n    },\r\n});\r\n"],"names":["window","innerBlocks","allowedBlocks","allowedServiceBlocks","template","servicesTemplate","level","className","placeholder","__","content","_metadata$attributes$","metadata","attributes","headline","default","templateLock","servicesTemplateLock","registerBlockType","edit","clientId","_metadata$attributes$2","blockProps","useBlockProps","hasSeededHeading","useRef","useSelect","select","getBlocks","insertBlocks","useDispatch","defaultHeadline","useEffect","current","Array","isArray","some","block","name","resolvedHeadline","headingBlock","createBlock","_jsx","children","InnerBlocks","save","Content"],"sourceRoot":""}