{"version":3,"file":"blocks/services/editor.js","mappings":"mBAAA,MAAM,EAA+BA,OAAW,GAAU,OCApD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAe,Y,6hCCAzD,EAA+BA,OAAwB,gB,MCQ7D,MACCC,aACCC,cAAeC,EAAuB,CACrC,eACA,kCACA,6BAEDC,SAAUC,EAAmB,CAC5B,CACC,eACA,CACCC,MAAO,EACPC,UAAW,gBACXC,aAAaC,EAAAA,EAAAA,IACZ,yBACA,sBAEDC,QACwC,QADjCC,EACNC,GAAUC,YAAYC,UAAUC,eAAO,IAAAJ,EAAAA,GACvCF,EAAAA,EAAAA,IAAI,aAAc,wBAGrB,CAAE,mCACF,CAAE,mCACF,CAAE,oCAEHO,aAAcC,GAAuB,GAClC,CAAC,GACFL,GAEJM,EAAAA,EAAAA,mBAAmBN,EAAAA,KAAe,IAC9BA,EACHO,KAAM,UAAe,WAAEN,EAAU,SAAEO,IAAa,IAAAC,EAC/C,MAAM,SAAEP,GAAaD,EACfS,GAAaC,EAAAA,EAAAA,iBACbC,GAAmBC,EAAAA,EAAAA,SAAQ,IAE3B,YAAExB,EAAc,KAAOyB,EAAAA,EAAAA,WAC1BC,IAAM,CACP1B,YACC0B,EAAQ,qBAAsBC,UAAWR,KAE3C,CAAEA,KAGG,aAAES,IAAiBC,EAAAA,EAAAA,aAAa,qBAChCC,EAAyD,QAA1CV,EAAGT,GAAUC,YAAYC,UAAUC,eAAO,IAAAM,EAAAA,EAAI,GAqCnE,OAnCAW,EAAAA,EAAAA,WAAW,KACV,GAAKR,EAAiBS,QACrB,OAGD,IAAOC,MAAMC,QAASlC,GACrB,OAOD,GAJmBA,EAAYmC,KAC5BC,GAA0B,iBAAfA,EAAMC,MAKnB,YADAd,EAAiBS,SAAU,GAI5B,MAAMM,EAAmBzB,GAAYiB,EAErC,IAAOQ,EAEN,YADAf,EAAiBS,SAAU,GAI5B,MAAMO,GAAeC,EAAAA,EAAAA,aAAa,eAAgB,CACjDnC,MAAO,EACPC,UAAW,gBACXG,QAAS6B,IAGVV,EAAcW,EAAc,EAAGpB,GAAU,GACzCI,EAAiBS,SAAU,GACzB,CAAEb,EAAUW,EAAiBjB,EAAUb,EAAa4B,KAGtDa,EAAAA,EAAAA,KAAA,cAAcpB,EAAUqB,UACvBD,EAAAA,EAAAA,KAAA,OAAKnC,UAAU,YAAWoC,UACzBD,EAAAA,EAAAA,KAACE,EAAAA,YAAW,CACX1C,cAAgBC,EAChBC,SAAWC,EACXW,aAAeC,OAKpB,EACA4B,KAAIA,KACIH,EAAAA,EAAAA,KAACE,EAAAA,YAAYE,QAAO,K","sources":["webpack://mccullough-digital-theme/external window [\"wp\",\"blocks\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"i18n\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"element\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"data\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"blockEditor\"]","webpack://mccullough-digital-theme/external window \"ReactJSXRuntime\"","webpack://mccullough-digital-theme/./blocks/services/editor.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","import { registerBlockType, createBlock } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport { useEffect, useRef } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useBlockProps, InnerBlocks } from '@wordpress/block-editor';\n\nimport metadata from './block.json';\n\nconst {\n\tinnerBlocks: {\n\t\tallowedBlocks: allowedServiceBlocks = [\n\t\t\t'core/heading',\n\t\t\t'mccullough-digital/service-card',\n\t\t\t'mccullough-digital/button',\n\t\t],\n\t\ttemplate: servicesTemplate = [\n\t\t\t[\n\t\t\t\t'core/heading',\n\t\t\t\t{\n\t\t\t\t\tlevel: 2,\n\t\t\t\t\tclassName: 'section-title',\n\t\t\t\t\tplaceholder: __(\n\t\t\t\t\t\t'Add services headlineâ€¦',\n\t\t\t\t\t\t'mccullough-digital'\n\t\t\t\t\t),\n\t\t\t\t\tcontent:\n\t\t\t\t\t\tmetadata?.attributes?.headline?.default ??\n\t\t\t\t\t\t__( 'What We Do', 'mccullough-digital' ),\n\t\t\t\t},\n\t\t\t],\n\t\t\t[ 'mccullough-digital/service-card' ],\n\t\t\t[ 'mccullough-digital/service-card' ],\n\t\t\t[ 'mccullough-digital/service-card' ],\n\t\t],\n\t\ttemplateLock: servicesTemplateLock = false,\n\t} = {},\n} = metadata;\n\nregisterBlockType( metadata.name, {\n\t...metadata,\n\tedit: function Edit( { attributes, clientId } ) {\n\t\tconst { headline } = attributes;\n\t\tconst blockProps = useBlockProps();\n\t\tconst hasSeededHeading = useRef( false );\n\n\t\tconst { innerBlocks = [] } = useSelect(\n\t\t\t( select ) => ( {\n\t\t\t\tinnerBlocks:\n\t\t\t\t\tselect( 'core/block-editor' ).getBlocks( clientId ),\n\t\t\t} ),\n\t\t\t[ clientId ]\n\t\t);\n\n\t\tconst { insertBlocks } = useDispatch( 'core/block-editor' );\n\t\tconst defaultHeadline = metadata?.attributes?.headline?.default ?? '';\n\n\t\tuseEffect( () => {\n\t\t\tif ( hasSeededHeading.current ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! Array.isArray( innerBlocks ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst hasHeading = innerBlocks.some(\n\t\t\t\t( block ) => block.name === 'core/heading'\n\t\t\t);\n\n\t\t\tif ( hasHeading ) {\n\t\t\t\thasSeededHeading.current = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst resolvedHeadline = headline || defaultHeadline;\n\n\t\t\tif ( ! resolvedHeadline ) {\n\t\t\t\thasSeededHeading.current = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst headingBlock = createBlock( 'core/heading', {\n\t\t\t\tlevel: 2,\n\t\t\t\tclassName: 'section-title',\n\t\t\t\tcontent: resolvedHeadline,\n\t\t\t} );\n\n\t\t\tinsertBlocks( headingBlock, 0, clientId, false );\n\t\t\thasSeededHeading.current = true;\n\t\t}, [ clientId, defaultHeadline, headline, innerBlocks, insertBlocks ] );\n\n\t\treturn (\n\t\t\t<section { ...blockProps }>\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\tallowedBlocks={ allowedServiceBlocks }\n\t\t\t\t\t\ttemplate={ servicesTemplate }\n\t\t\t\t\t\ttemplateLock={ servicesTemplateLock }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t);\n\t},\n\tsave() {\n\t\treturn <InnerBlocks.Content />;\n\t},\n} );\n"],"names":["window","innerBlocks","allowedBlocks","allowedServiceBlocks","template","servicesTemplate","level","className","placeholder","__","content","_metadata$attributes$","metadata","attributes","headline","default","templateLock","servicesTemplateLock","registerBlockType","edit","clientId","_metadata$attributes$2","blockProps","useBlockProps","hasSeededHeading","useRef","useSelect","select","getBlocks","insertBlocks","useDispatch","defaultHeadline","useEffect","current","Array","isArray","some","block","name","resolvedHeadline","headingBlock","createBlock","_jsx","children","InnerBlocks","save","Content"],"sourceRoot":""}