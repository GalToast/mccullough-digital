{"version":3,"file":"blocks/service-card/editor.js","mappings":"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","sources":["webpack://mccullough-digital-theme/external window \"React\"","webpack://mccullough-digital-theme/external window [\"wp\",\"blocks\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"i18n\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"element\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"data\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"blockEditor\"]","webpack://mccullough-digital-theme/./blocks/service-card/editor.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","import { registerBlockType, createBlock } from '@wordpress/blocks';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useEffect, useRef } from '@wordpress/element';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n    useBlockProps,\r\n    InnerBlocks,\r\n} from '@wordpress/block-editor';\r\n\r\nimport metadata from './block.json';\r\n\r\nconst {\r\n    innerBlocks: {\r\n        allowedBlocks: allowedCardBlocks = [\r\n            'core/group',\r\n            'core/heading',\r\n            'core/paragraph',\r\n            'core/list',\r\n            'core/html',\r\n            'core/buttons',\r\n            'core/button',\r\n            'core/image',\r\n        ],\r\n        template: cardTemplate = [\r\n            [\r\n                'core/group',\r\n                {\r\n                    className: 'service-card__body',\r\n                },\r\n                [\r\n                    [\r\n                        'core/group',\r\n                        {\r\n                            className: 'icon',\r\n                        },\r\n                    ],\r\n                    [\r\n                        'core/heading',\r\n                        {\r\n                            level: 3,\r\n                            placeholder: __('Add service title…', 'mccullough-digital'),\r\n                            content: metadata?.attributes?.title?.default ?? __('Service title', 'mccullough-digital'),\r\n                        },\r\n                    ],\r\n                    [\r\n                        'core/paragraph',\r\n                        {\r\n                            placeholder: __('Describe the value of this service…', 'mccullough-digital'),\r\n                            content: metadata?.attributes?.text?.default ?? '',\r\n                        },\r\n                    ],\r\n                ],\r\n            ],\r\n            [\r\n                'core/buttons',\r\n                {\r\n                    className: 'service-card__cta',\r\n                    layout: {\r\n                        type: 'flex',\r\n                        justifyContent: 'center',\r\n                    },\r\n                },\r\n                [\r\n                    [\r\n                        'core/button',\r\n                        {\r\n                            className: 'learn-more',\r\n                            text: metadata?.attributes?.linkText?.default ?? __('Learn More →', 'mccullough-digital'),\r\n                        },\r\n                    ],\r\n                ],\r\n            ],\r\n        ],\r\n        templateLock: cardTemplateLock = false,\r\n    } = {},\r\n} = metadata;\r\n\r\nregisterBlockType(metadata.name, {\r\n    ...metadata,\r\n    edit({ attributes, clientId }) {\r\n        const { icon, title, text, linkText, linkUrl } = attributes;\r\n        const blockProps = useBlockProps({\r\n            className: 'service-card',\r\n        });\r\n\r\n        const hasMigrated = useRef(false);\r\n        const { innerBlocks = [] } = useSelect(\r\n            (select) => ({\r\n                innerBlocks: select('core/block-editor').getBlocks(clientId),\r\n            }),\r\n            [clientId]\r\n        );\r\n        const { replaceInnerBlocks } = useDispatch('core/block-editor');\r\n\r\n        useEffect(() => {\r\n            if (hasMigrated.current) {\r\n                return;\r\n            }\r\n\r\n            if (innerBlocks.length > 0) {\r\n                hasMigrated.current = true;\r\n                return;\r\n            }\r\n\r\n            const bodyChildren = [];\r\n\r\n            const iconGroupChildren = [];\r\n\r\n            if (icon) {\r\n                iconGroupChildren.push(\r\n                    createBlock('core/html', {\r\n                        content: icon,\r\n                    })\r\n                );\r\n            }\r\n\r\n            const iconGroup = createBlock(\r\n                'core/group',\r\n                {\r\n                    className: 'icon',\r\n                },\r\n                iconGroupChildren\r\n            );\r\n\r\n            bodyChildren.push(iconGroup);\r\n\r\n            if (title) {\r\n                bodyChildren.push(\r\n                    createBlock('core/heading', {\r\n                        level: 3,\r\n                        content: title,\r\n                    })\r\n                );\r\n            }\r\n\r\n            if (text) {\r\n                bodyChildren.push(\r\n                    createBlock('core/paragraph', {\r\n                        content: text,\r\n                    })\r\n                );\r\n            }\r\n\r\n            const bodyGroup = createBlock(\r\n                'core/group',\r\n                {\r\n                    className: 'service-card__body',\r\n                },\r\n                bodyChildren\r\n            );\r\n\r\n            const newBlocks = [bodyGroup];\r\n\r\n            if (linkText || linkUrl) {\r\n                const button = createBlock('core/button', {\r\n                    className: 'learn-more',\r\n                    text: linkText || (metadata?.attributes?.linkText?.default ?? ''),\r\n                    url: linkUrl || undefined,\r\n                });\r\n\r\n                const buttons = createBlock(\r\n                    'core/buttons',\r\n                    {\r\n                        className: 'service-card__cta',\r\n                        layout: {\r\n                            type: 'flex',\r\n                            justifyContent: 'center',\r\n                        },\r\n                    },\r\n                    [button]\r\n                );\r\n\r\n                newBlocks.push(buttons);\r\n            }\r\n\r\n            if (newBlocks.length === 0) {\r\n                return;\r\n            }\r\n\r\n            replaceInnerBlocks(clientId, newBlocks, false);\r\n            hasMigrated.current = true;\r\n        }, [\r\n            clientId,\r\n            icon,\r\n            innerBlocks.length,\r\n            linkText,\r\n            linkUrl,\r\n            replaceInnerBlocks,\r\n            text,\r\n            title,\r\n        ]);\r\n\r\n        return (\r\n            <>\r\n                <article {...blockProps}>\r\n                    <div className=\"service-card-content\">\r\n                        <InnerBlocks\r\n                            allowedBlocks={ allowedCardBlocks }\r\n                            template={ cardTemplate }\r\n                            templateLock={ cardTemplateLock }\r\n                        />\r\n                    </div>\r\n                </article>\r\n            </>\r\n        );\r\n    },\r\n    save() {\r\n        return <InnerBlocks.Content />;\r\n    },\r\n});\r\n"],"names":["window","innerBlocks","allowedBlocks","allowedCardBlocks","template","cardTemplate","className","level","placeholder","__","content","_metadata$attributes$","metadata","attributes","title","default","_metadata$attributes$2","text","layout","type","justifyContent","_metadata$attributes$3","linkText","templateLock","cardTemplateLock","registerBlockType","edit","clientId","icon","linkUrl","blockProps","useBlockProps","hasMigrated","useRef","useSelect","select","getBlocks","replaceInnerBlocks","useDispatch","useEffect","current","length","bodyChildren","iconGroupChildren","push","createBlock","iconGroup","newBlocks","_metadata$attributes$4","button","url","undefined","buttons","createElement","Fragment","InnerBlocks","save","Content"],"sourceRoot":""}