{"version":3,"file":"blocks/service-card/editor.js","mappings":"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","sources":["webpack://mccullough-digital-theme/external window [\"wp\",\"blocks\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"i18n\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"element\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"data\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"blockEditor\"]","webpack://mccullough-digital-theme/external window \"ReactJSXRuntime\"","webpack://mccullough-digital-theme/./blocks/service-card/editor.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","import { registerBlockType, createBlock } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport { useEffect, useRef } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useBlockProps, InnerBlocks } from '@wordpress/block-editor';\n\nimport metadata from './block.json';\n\nconst {\n\tinnerBlocks: {\n\t\tallowedBlocks: allowedCardBlocks = [\n\t\t\t'core/group',\n\t\t\t'core/heading',\n\t\t\t'core/paragraph',\n\t\t\t'core/list',\n\t\t\t'core/html',\n\t\t\t'core/buttons',\n\t\t\t'core/button',\n\t\t\t'core/image',\n\t\t],\n\t\ttemplate: cardTemplate = [\n\t\t\t[\n\t\t\t\t'core/group',\n\t\t\t\t{\n\t\t\t\t\tclassName: 'service-card__body',\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\t[\n\t\t\t\t\t\t'core/group',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclassName: 'icon',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t'core/heading',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlevel: 3,\n\t\t\t\t\t\t\tplaceholder: __(\n\t\t\t\t\t\t\t\t'Add service title…',\n\t\t\t\t\t\t\t\t'mccullough-digital'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tcontent:\n\t\t\t\t\t\t\t\tmetadata?.attributes?.title?.default ??\n\t\t\t\t\t\t\t\t__( 'Service title', 'mccullough-digital' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t'core/paragraph',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tplaceholder: __(\n\t\t\t\t\t\t\t\t'Describe the value of this service…',\n\t\t\t\t\t\t\t\t'mccullough-digital'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tcontent: metadata?.attributes?.text?.default ?? '',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t],\n\t\t\t[\n\t\t\t\t'core/buttons',\n\t\t\t\t{\n\t\t\t\t\tclassName: 'service-card__cta',\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'flex',\n\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\t[\n\t\t\t\t\t\t'core/button',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclassName: 'learn-more',\n\t\t\t\t\t\t\ttext:\n\t\t\t\t\t\t\t\tmetadata?.attributes?.linkText?.default ??\n\t\t\t\t\t\t\t\t__( 'Learn More →', 'mccullough-digital' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t],\n\t\t],\n\t\ttemplateLock: cardTemplateLock = false,\n\t} = {},\n} = metadata;\n\nregisterBlockType( metadata.name, {\n\t...metadata,\n\tedit: function Edit( { attributes, clientId } ) {\n\t\tconst { icon, title, text, linkText, linkUrl } = attributes;\n\t\tconst blockProps = useBlockProps( {\n\t\t\tclassName: 'service-card',\n\t\t} );\n\n\t\tconst hasMigrated = useRef( false );\n\t\tconst { innerBlocks = [] } = useSelect(\n\t\t\t( select ) => ( {\n\t\t\t\tinnerBlocks:\n\t\t\t\t\tselect( 'core/block-editor' ).getBlocks( clientId ),\n\t\t\t} ),\n\t\t\t[ clientId ]\n\t\t);\n\t\tconst { replaceInnerBlocks } = useDispatch( 'core/block-editor' );\n\n\t\tuseEffect( () => {\n\t\t\tif ( hasMigrated.current ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( innerBlocks.length > 0 ) {\n\t\t\t\thasMigrated.current = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst bodyChildren = [];\n\n\t\t\tconst iconGroupChildren = [];\n\n\t\t\tif ( icon ) {\n\t\t\t\ticonGroupChildren.push(\n\t\t\t\t\tcreateBlock( 'core/html', {\n\t\t\t\t\t\tcontent: icon,\n\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst iconGroup = createBlock(\n\t\t\t\t'core/group',\n\t\t\t\t{\n\t\t\t\t\tclassName: 'icon',\n\t\t\t\t},\n\t\t\t\ticonGroupChildren\n\t\t\t);\n\n\t\t\tbodyChildren.push( iconGroup );\n\n\t\t\tif ( title ) {\n\t\t\t\tbodyChildren.push(\n\t\t\t\t\tcreateBlock( 'core/heading', {\n\t\t\t\t\t\tlevel: 3,\n\t\t\t\t\t\tcontent: title,\n\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( text ) {\n\t\t\t\tbodyChildren.push(\n\t\t\t\t\tcreateBlock( 'core/paragraph', {\n\t\t\t\t\t\tcontent: text,\n\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst bodyGroup = createBlock(\n\t\t\t\t'core/group',\n\t\t\t\t{\n\t\t\t\t\tclassName: 'service-card__body',\n\t\t\t\t},\n\t\t\t\tbodyChildren\n\t\t\t);\n\n\t\t\tconst newBlocks = [ bodyGroup ];\n\n\t\t\tif ( linkText || linkUrl ) {\n\t\t\t\tconst button = createBlock( 'core/button', {\n\t\t\t\t\tclassName: 'learn-more',\n\t\t\t\t\ttext:\n\t\t\t\t\t\tlinkText ||\n\t\t\t\t\t\t( metadata?.attributes?.linkText?.default ?? '' ),\n\t\t\t\t\turl: linkUrl || undefined,\n\t\t\t\t} );\n\n\t\t\t\tconst buttons = createBlock(\n\t\t\t\t\t'core/buttons',\n\t\t\t\t\t{\n\t\t\t\t\t\tclassName: 'service-card__cta',\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\ttype: 'flex',\n\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t[ button ]\n\t\t\t\t);\n\n\t\t\t\tnewBlocks.push( buttons );\n\t\t\t}\n\n\t\t\tif ( newBlocks.length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treplaceInnerBlocks( clientId, newBlocks, false );\n\t\t\thasMigrated.current = true;\n\t\t}, [\n\t\t\tclientId,\n\t\t\ticon,\n\t\t\tinnerBlocks.length,\n\t\t\tlinkText,\n\t\t\tlinkUrl,\n\t\t\treplaceInnerBlocks,\n\t\t\ttext,\n\t\t\ttitle,\n\t\t] );\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<article { ...blockProps }>\n\t\t\t\t\t<div className=\"service-card-content\">\n\t\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\t\tallowedBlocks={ allowedCardBlocks }\n\t\t\t\t\t\t\ttemplate={ cardTemplate }\n\t\t\t\t\t\t\ttemplateLock={ cardTemplateLock }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</article>\n\t\t\t</>\n\t\t);\n\t},\n\tsave() {\n\t\treturn <InnerBlocks.Content />;\n\t},\n} );\n"],"names":["window","innerBlocks","allowedBlocks","allowedCardBlocks","template","cardTemplate","className","level","placeholder","__","content","_metadata$attributes$","metadata","attributes","title","default","_metadata$attributes$2","text","layout","type","justifyContent","_metadata$attributes$3","linkText","templateLock","cardTemplateLock","registerBlockType","edit","clientId","icon","linkUrl","blockProps","useBlockProps","hasMigrated","useRef","useSelect","select","getBlocks","replaceInnerBlocks","useDispatch","useEffect","current","length","bodyChildren","iconGroupChildren","push","createBlock","iconGroup","newBlocks","_metadata$attributes$4","button","url","undefined","buttons","_jsx","_Fragment","children","InnerBlocks","save","Content"],"sourceRoot":""}