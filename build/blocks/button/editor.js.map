{"version":3,"file":"blocks/button/editor.js","mappings":"mBAAA,MAAM,EAA+BA,OAAW,GAAU,OCApD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAe,YCAzD,EAA+BA,OAAW,GAAc,W,4tBCAxD,EAA+BA,OAAwB,iBCmB7DC,EAAAA,EAAAA,mBAAmBC,EAAAA,KAAe,IAC3BA,EACHC,IAAAA,EAAM,WAAEC,EAAU,cAAEC,IAChB,MAAM,WAAEC,EAAU,WAAEC,EAAU,cAAEC,GAAkBJ,EAC5CK,EACFP,GAAUE,YAAYE,YAAYI,UAClCC,EAAAA,EAAAA,IAAG,kBAAmB,uBAG1BC,EAAAA,EAAAA,WAAW,UACaC,IAAfP,GACDD,EAAe,CAAEC,WAAYG,KAElC,IACH,MAAMK,GAAaC,EAAAA,EAAAA,eAAe,CAC9BC,UAAW,qBAITC,EAAoB,CACtBD,UAFoB,+BAKnBT,IACDU,EAAkBC,KAAOX,EACpBC,IACDS,EAAkBE,OAAS,SAC3BF,EAAkBG,IAAM,YAE5BH,EAAkBI,QAAYC,IAC1BA,EAAMC,mBAId,MAAMC,EAAYjB,EAAa,IAAM,SAErC,OACIkB,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAC,SAAA,EACIC,EAAAA,EAAAA,KAACC,EAAAA,cAAa,CAAAF,UACVC,EAAAA,EAAAA,KAACE,EAAAA,aAAY,CAAAH,UACTC,EAAAA,EAAAA,KAACG,EAAAA,eAAc,CACXC,IAAMzB,EACN0B,SAAaD,GACT3B,EAAe,CAAEE,WAAYyB,QAAAA,EAAO,YAKpDJ,EAAAA,EAAAA,KAACM,EAAAA,kBAAiB,CAAAP,UACdC,EAAAA,EAAAA,KAACO,EAAAA,UAAS,CAACC,OAAQzB,EAAAA,EAAAA,IAAG,kBAAmB,sBAAuBgB,UAC5DC,EAAAA,EAAAA,KAACS,EAAAA,cAAa,CACVC,OAAQ3B,EAAAA,EAAAA,IAAG,kBAAmB,sBAC9B4B,QAAU/B,EACVyB,SAAYO,GAAUnC,EAAc,CAAEG,cAAegC,IACrDC,MAAO9B,EAAAA,EAAAA,IAAG,6DAA8D,sBACxE+B,UAAanC,SAIzBkB,EAAAA,EAAAA,MAAA,UAAUX,EAAUa,SAAA,EAChBC,EAAAA,EAAAA,KAACJ,EAAS,IAAMP,EAAoB0B,KAAOpC,OAAaM,EAAY,SAAUc,UAC1EC,EAAAA,EAAAA,KAACgB,EAAAA,SAAQ,CACLC,QAAQ,OACR7B,UAAU,yBACVwB,MAAQlC,QAAAA,EAAc,GACtB2B,SAAYO,GAAUnC,EAAc,CAAEC,WAAYkC,IAClDM,eAAiB,GACjBC,aAAcpC,EAAAA,EAAAA,IAAG,mBAAoB,2BAGzCJ,IACAqB,EAAAA,EAAAA,KAACoB,EAAAA,OAAM,CACHC,OAAO,OACPC,eAAgB,EAChBlC,UAAU,gCAA+BW,UAEvChB,EAAAA,EAAAA,IAAG,4EAA6E,6BAM1G,EACAwC,KAAIA,IACO,M","sources":["webpack://mccullough-digital-theme/external window [\"wp\",\"blocks\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"i18n\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"element\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"blockEditor\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"components\"]","webpack://mccullough-digital-theme/external window \"ReactJSXRuntime\"","webpack://mccullough-digital-theme/./blocks/button/editor.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","import { registerBlockType } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport { useEffect } from '@wordpress/element';\nimport {\n    useBlockProps,\n    RichText,\n    BlockControls,\n    URLInputButton,\n    InspectorControls,\n} from '@wordpress/block-editor';\nimport {\n    PanelBody,\n    ToggleControl,\n    Notice,\n    ToolbarGroup,\n} from '@wordpress/components';\n\nimport metadata from './block.json';\n\nregisterBlockType( metadata.name, {\n    ...metadata,\n    edit( { attributes, setAttributes } ) {\n        const { buttonText, buttonLink, opensInNewTab } = attributes;\n        const defaultButtonText =\n            metadata?.attributes?.buttonText?.default ||\n            __('Start a Project', 'mccullough-digital');\n\n        // Only set default text on initial mount if buttonText is undefined (not just empty)\n        useEffect( () => {\n            if ( buttonText === undefined ) {\n                setAttributes( { buttonText: defaultButtonText } );\n            }\n        }, [] ); // Empty dependency array means this only runs once on mount\n        const blockProps = useBlockProps( {\n            className: 'mcd-button-block',\n        } );\n\n        const buttonBaseClass = 'cta-button hero__cta-button';\n        const commonButtonProps = {\n            className: buttonBaseClass,\n        };\n\n        if ( buttonLink ) {\n            commonButtonProps.href = buttonLink;\n            if ( opensInNewTab ) {\n                commonButtonProps.target = '_blank';\n                commonButtonProps.rel = 'noopener';\n            }\n            commonButtonProps.onClick = ( event ) => {\n                event.preventDefault();\n            };\n        }\n\n        const ButtonTag = buttonLink ? 'a' : 'button';\n\n        return (\n            <>\n                <BlockControls>\n                    <ToolbarGroup>\n                        <URLInputButton\n                            url={ buttonLink }\n                            onChange={ ( url ) =>\n                                setAttributes( { buttonLink: url ?? '' } )\n                            }\n                        />\n                    </ToolbarGroup>\n                </BlockControls>\n                <InspectorControls>\n                    <PanelBody title={ __('Button Settings', 'mccullough-digital') }>\n                        <ToggleControl\n                            label={ __('Open in new tab', 'mccullough-digital') }\n                            checked={ opensInNewTab }\n                            onChange={ (value) => setAttributes({ opensInNewTab: value }) }\n                            help={ __('Adds target=\"_blank\" and rel=\"noopener\" when a URL is set.', 'mccullough-digital') }\n                            disabled={ ! buttonLink }\n                        />\n                    </PanelBody>\n                </InspectorControls>\n                <div { ...blockProps }>\n                    <ButtonTag { ...commonButtonProps } type={ buttonLink ? undefined : 'button' }>\n                        <RichText\n                            tagName=\"span\"\n                            className=\"hero__cta-button-label\"\n                            value={ buttonText ?? '' }\n                            onChange={ (value) => setAttributes({ buttonText: value }) }\n                            allowedFormats={ [] }\n                            placeholder={ __('Add button textâ€¦', 'mccullough-digital') }\n                        />\n                    </ButtonTag>\n                    { ! buttonLink && (\n                        <Notice\n                            status=\"info\"\n                            isDismissible={ false }\n                            className=\"mcd-button-block__link-notice\"\n                        >\n                            { __('Add a link from the toolbar to output an anchor element on the front end.', 'mccullough-digital') }\n                        </Notice>\n                    ) }\n                </div>\n            </>\n        );\n    },\n    save() {\n        return null;\n    },\n});\n"],"names":["window","registerBlockType","metadata","edit","attributes","setAttributes","buttonText","buttonLink","opensInNewTab","defaultButtonText","default","__","useEffect","undefined","blockProps","useBlockProps","className","commonButtonProps","href","target","rel","onClick","event","preventDefault","ButtonTag","_jsxs","_Fragment","children","_jsx","BlockControls","ToolbarGroup","URLInputButton","url","onChange","InspectorControls","PanelBody","title","ToggleControl","label","checked","value","help","disabled","type","RichText","tagName","allowedFormats","placeholder","Notice","status","isDismissible","save"],"sourceRoot":""}