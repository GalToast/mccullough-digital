{"version":3,"file":"blocks/cta/editor.js","mappings":"mBAAA,MAAM,EAA+BA,OAAW,GAAU,OCApD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAe,Y,slCCAzD,EAA+BA,OAAwB,gB,QCQ7D,MAAMC,EAAyD,QAA1CC,EAAGC,GAAUC,YAAYC,UAAUC,eAAO,IAAAJ,EAAAA,EAAI,GAC7DK,EACoC,QADnBC,EACtBL,GAAUC,YAAYK,YAAYH,eAAO,IAAAE,EAAAA,GACzCE,EAAAA,EAAAA,IAAI,aAAc,uBAGlBC,aACCC,cAAeC,EAAmB,CACjC,eACA,iBACA,YACA,eACA,aACA,aACA,6BAEDC,SAAUC,EAAc,CACvB,CACC,eACA,CACCC,MAAO,EACPC,UAAW,gBACXC,aAAaR,EAAAA,EAAAA,IACZ,oBACA,sBAEDS,QAASlB,KAIZmB,aAAcC,GAAkB,GAC7B,CAAC,GACFlB,GAEJmB,EAAAA,EAAAA,mBAAmBnB,EAAAA,KAAe,IAC9BA,EACHoB,KAAM,UAAe,WAAEnB,EAAU,SAAEoB,IAClC,MAAM,SAAEnB,EAAQ,WAAEI,EAAU,WAAEgB,GAAerB,EACvCsB,GAAaC,EAAAA,EAAAA,eAAe,CACjCV,UAAW,gBAGNW,GAAcC,EAAAA,EAAAA,SAAQ,IACtB,YAAElB,EAAc,KAAOmB,EAAAA,EAAAA,WAC1BC,IAAM,CACPpB,YACCoB,EAAQ,qBAAsBC,UAAWR,KAE3C,CAAEA,KAEG,mBAAES,IAAuBC,EAAAA,EAAAA,aAAa,qBAgD5C,OA9CAC,EAAAA,EAAAA,WAAW,KACV,GAAKP,EAAYQ,QAChB,OAGD,GAAKzB,EAAY0B,OAAS,EAEzB,YADAT,EAAYQ,SAAU,GAIvB,MAAME,EAAkB,GAYxB,GAVKjC,GACJiC,EAAgBC,MACfC,EAAAA,EAAAA,aAAa,eAAgB,CAC5BxB,MAAO,EACPC,UAAW,gBACXE,QAASd,KAKPI,GAAcgB,EAAa,CAC/B,MAAMgB,GAAaD,EAAAA,EAAAA,aAAa,4BAA6B,CAC5D/B,WAAYA,GAAcF,EAC1BkB,WAAYA,GAAc,KAG3Ba,EAAgBC,KAAME,EACvB,CAEgC,IAA3BH,EAAgBD,SAIrBJ,EAAoBT,EAAUc,GAAiB,GAC/CV,EAAYQ,SAAU,IACpB,CACFX,EACAhB,EACAe,EACAnB,EACAM,EAAY0B,OACZJ,KAIAS,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,UACCF,EAAAA,EAAAA,KAAA,cAAchB,EAAUkB,UACvBF,EAAAA,EAAAA,KAAA,OAAKzB,UAAU,YAAW2B,UACzBF,EAAAA,EAAAA,KAACG,EAAAA,YAAW,CACXjC,cAAgBC,EAChBC,SAAWC,EACXK,aAAeC,SAMrB,EACAyB,KAAIA,KACIJ,EAAAA,EAAAA,KAACG,EAAAA,YAAYE,QAAO,K","sources":["webpack://mccullough-digital-theme/external window [\"wp\",\"blocks\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"i18n\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"element\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"data\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"blockEditor\"]","webpack://mccullough-digital-theme/external window \"ReactJSXRuntime\"","webpack://mccullough-digital-theme/./blocks/cta/editor.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","import { registerBlockType, createBlock } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport { useEffect, useRef } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useBlockProps, InnerBlocks } from '@wordpress/block-editor';\n\nimport metadata from './block.json';\n\nconst defaultHeadline = metadata?.attributes?.headline?.default ?? '';\nconst defaultButtonText =\n\tmetadata?.attributes?.buttonText?.default ??\n\t__( \"Let's Talk\", 'mccullough-digital' );\n\nconst {\n\tinnerBlocks: {\n\t\tallowedBlocks: allowedCtaBlocks = [\n\t\t\t'core/heading',\n\t\t\t'core/paragraph',\n\t\t\t'core/list',\n\t\t\t'core/buttons',\n\t\t\t'core/group',\n\t\t\t'core/image',\n\t\t\t'mccullough-digital/button',\n\t\t],\n\t\ttemplate: ctaTemplate = [\n\t\t\t[\n\t\t\t\t'core/heading',\n\t\t\t\t{\n\t\t\t\t\tlevel: 2,\n\t\t\t\t\tclassName: 'section-title',\n\t\t\t\t\tplaceholder: __(\n\t\t\t\t\t\t'Add CTA headlineâ€¦',\n\t\t\t\t\t\t'mccullough-digital'\n\t\t\t\t\t),\n\t\t\t\t\tcontent: defaultHeadline,\n\t\t\t\t},\n\t\t\t],\n\t\t],\n\t\ttemplateLock: ctaTemplateLock = false,\n\t} = {},\n} = metadata;\n\nregisterBlockType( metadata.name, {\n\t...metadata,\n\tedit: function Edit( { attributes, clientId } ) {\n\t\tconst { headline, buttonText, buttonLink } = attributes;\n\t\tconst blockProps = useBlockProps( {\n\t\t\tclassName: 'cta-section',\n\t\t} );\n\n\t\tconst hasMigrated = useRef( false );\n\t\tconst { innerBlocks = [] } = useSelect(\n\t\t\t( select ) => ( {\n\t\t\t\tinnerBlocks:\n\t\t\t\t\tselect( 'core/block-editor' ).getBlocks( clientId ),\n\t\t\t} ),\n\t\t\t[ clientId ]\n\t\t);\n\t\tconst { replaceInnerBlocks } = useDispatch( 'core/block-editor' );\n\n\t\tuseEffect( () => {\n\t\t\tif ( hasMigrated.current ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( innerBlocks.length > 0 ) {\n\t\t\t\thasMigrated.current = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst generatedBlocks = [];\n\n\t\t\tif ( headline ) {\n\t\t\t\tgeneratedBlocks.push(\n\t\t\t\t\tcreateBlock( 'core/heading', {\n\t\t\t\t\t\tlevel: 2,\n\t\t\t\t\t\tclassName: 'section-title',\n\t\t\t\t\t\tcontent: headline,\n\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( buttonText || buttonLink ) {\n\t\t\t\tconst neonButton = createBlock( 'mccullough-digital/button', {\n\t\t\t\t\tbuttonText: buttonText || defaultButtonText,\n\t\t\t\t\tbuttonLink: buttonLink || '',\n\t\t\t\t} );\n\n\t\t\t\tgeneratedBlocks.push( neonButton );\n\t\t\t}\n\n\t\t\tif ( generatedBlocks.length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treplaceInnerBlocks( clientId, generatedBlocks, false );\n\t\t\thasMigrated.current = true;\n\t\t}, [\n\t\t\tbuttonLink,\n\t\t\tbuttonText,\n\t\t\tclientId,\n\t\t\theadline,\n\t\t\tinnerBlocks.length,\n\t\t\treplaceInnerBlocks,\n\t\t] );\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<section { ...blockProps }>\n\t\t\t\t\t<div className=\"container\">\n\t\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\t\tallowedBlocks={ allowedCtaBlocks }\n\t\t\t\t\t\t\ttemplate={ ctaTemplate }\n\t\t\t\t\t\t\ttemplateLock={ ctaTemplateLock }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</>\n\t\t);\n\t},\n\tsave() {\n\t\treturn <InnerBlocks.Content />;\n\t},\n} );\n"],"names":["window","defaultHeadline","_metadata$attributes$","metadata","attributes","headline","default","defaultButtonText","_metadata$attributes$2","buttonText","__","innerBlocks","allowedBlocks","allowedCtaBlocks","template","ctaTemplate","level","className","placeholder","content","templateLock","ctaTemplateLock","registerBlockType","edit","clientId","buttonLink","blockProps","useBlockProps","hasMigrated","useRef","useSelect","select","getBlocks","replaceInnerBlocks","useDispatch","useEffect","current","length","generatedBlocks","push","createBlock","neonButton","_jsx","_Fragment","children","InnerBlocks","save","Content"],"sourceRoot":""}