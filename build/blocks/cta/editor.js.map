{"version":3,"file":"blocks/cta/editor.js","mappings":"mBAAA,MAAM,EAA+BA,OAAc,MCA7C,EAA+BA,OAAW,GAAU,OCApD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAe,Y,svCCW/D,MAAMC,EAAyD,QAA1CC,EAAGC,GAAUC,YAAYC,UAAUC,eAAO,IAAAJ,EAAAA,EAAI,GAC7DK,EAA6D,QAA5CC,EAAGL,GAAUC,YAAYK,YAAYH,eAAO,IAAAE,EAAAA,GAC5DE,EAAAA,EAAAA,IAAG,aAAe,sBACnBC,EAA6D,QAA5CC,EAAGT,GAAUC,YAAYS,YAAYP,eAAO,IAAAM,EAAAA,EAAI,IAGnEE,aACIC,cAAeC,EAAmB,CAC9B,eACA,iBACA,YACA,eACA,aACA,cAEJC,SAAUC,EAAc,CACpB,CACI,eACA,CACIC,MAAO,EACPC,UAAW,gBACXC,aAAaX,EAAAA,EAAAA,IAAG,oBAAqB,sBACrCY,QAASrB,IAGjB,CACI,eACA,CACIsB,OAAQ,CACJC,KAAM,OACNC,eAAgB,WAGxB,CACI,CACI,cACA,CACIL,UAAW,aACXM,KAAMnB,EACNoB,IAAKhB,OAMzBiB,aAAcC,GAAkB,GAChC,CAAC,GACL1B,GAEJ2B,EAAAA,EAAAA,mBAAkB3B,EAAAA,KAAe,IAC1BA,EACH4B,IAAAA,EAAK,WAAE3B,EAAU,SAAE4B,IACf,MAAM,SAAE3B,EAAQ,WAAEI,EAAU,WAAEI,GAAeT,EACvC6B,GAAaC,EAAAA,EAAAA,eAAc,CAC7Bd,UAAW,gBAGTe,GAAcC,EAAAA,EAAAA,SAAO,IACrB,YAAEtB,EAAc,KAAOuB,EAAAA,EAAAA,WACxBC,IAAM,CACHxB,YAAawB,EAAO,qBAAqBC,UAAUP,KAEvD,CAACA,KAEC,mBAAEQ,IAAuBC,EAAAA,EAAAA,aAAY,qBA4D3C,OA1DAC,EAAAA,EAAAA,WAAU,KACN,GAAIP,EAAYQ,QACZ,OAGJ,GAAI7B,EAAY8B,OAAS,EAErB,YADAT,EAAYQ,SAAU,GAI1B,MAAME,EAAkB,GAYxB,GAVIxC,GACAwC,EAAgBC,MACZC,EAAAA,EAAAA,aAAY,eAAgB,CACxB5B,MAAO,EACPC,UAAW,gBACXE,QAASjB,KAKjBI,GAAcI,EAAY,CAC1B,MAAMmC,GAASD,EAAAA,EAAAA,aAAY,cAAe,CACtC3B,UAAW,aACXM,KAAMjB,GAAcF,EACpBoB,IAAKd,QAAcoC,IAGjBC,GAAiBH,EAAAA,EAAAA,aACnB,eACA,CACIxB,OAAQ,CACJC,KAAM,OACNC,eAAgB,WAGxB,CAACuB,IAGLH,EAAgBC,KAAKI,EACzB,CAE+B,IAA3BL,EAAgBD,SAIpBJ,EAAmBR,EAAUa,GAAiB,GAC9CV,EAAYQ,SAAU,IACvB,CACC9B,EACAJ,EACAuB,EACA3B,EACAS,EAAY8B,OACZJ,KAIAW,EAAAA,EAAAA,eAAAC,EAAAA,SAAA,MACID,EAAAA,EAAAA,eAAA,cAAalB,IACTkB,EAAAA,EAAAA,eAAA,OAAK/B,UAAU,cACX+B,EAAAA,EAAAA,eAACE,EAAAA,YAAW,CACRtC,cAAgBC,EAChBC,SAAWC,EACXU,aAAeC,MAMvC,EACAyB,KAAIA,KACOH,EAAAA,EAAAA,eAACE,EAAAA,YAAYE,QAAO,O","sources":["webpack://mccullough-digital-theme/external window \"React\"","webpack://mccullough-digital-theme/external window [\"wp\",\"blocks\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"i18n\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"element\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"data\"]","webpack://mccullough-digital-theme/external window [\"wp\",\"blockEditor\"]","webpack://mccullough-digital-theme/./blocks/cta/editor.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","import { registerBlockType, createBlock } from '@wordpress/blocks';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useEffect, useRef } from '@wordpress/element';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n    useBlockProps,\r\n    InnerBlocks,\r\n} from '@wordpress/block-editor';\r\n\r\nimport metadata from './block.json';\r\n\r\nconst defaultHeadline = metadata?.attributes?.headline?.default ?? '';\r\nconst defaultButtonText = metadata?.attributes?.buttonText?.default\r\n    ?? __('Let\\'s Talk', 'mccullough-digital');\r\nconst defaultButtonLink = metadata?.attributes?.buttonLink?.default ?? '';\r\n\r\nconst {\r\n    innerBlocks: {\r\n        allowedBlocks: allowedCtaBlocks = [\r\n            'core/heading',\r\n            'core/paragraph',\r\n            'core/list',\r\n            'core/buttons',\r\n            'core/group',\r\n            'core/image',\r\n        ],\r\n        template: ctaTemplate = [\r\n            [\r\n                'core/heading',\r\n                {\r\n                    level: 2,\r\n                    className: 'section-title',\r\n                    placeholder: __('Add CTA headlineâ€¦', 'mccullough-digital'),\r\n                    content: defaultHeadline,\r\n                },\r\n            ],\r\n            [\r\n                'core/buttons',\r\n                {\r\n                    layout: {\r\n                        type: 'flex',\r\n                        justifyContent: 'center',\r\n                    },\r\n                },\r\n                [\r\n                    [\r\n                        'core/button',\r\n                        {\r\n                            className: 'cta-button',\r\n                            text: defaultButtonText,\r\n                            url: defaultButtonLink,\r\n                        },\r\n                    ],\r\n                ],\r\n            ],\r\n        ],\r\n        templateLock: ctaTemplateLock = false,\r\n    } = {},\r\n} = metadata;\r\n\r\nregisterBlockType(metadata.name, {\r\n    ...metadata,\r\n    edit({ attributes, clientId }) {\r\n        const { headline, buttonText, buttonLink } = attributes;\r\n        const blockProps = useBlockProps({\r\n            className: 'cta-section',\r\n        });\r\n\r\n        const hasMigrated = useRef(false);\r\n        const { innerBlocks = [] } = useSelect(\r\n            (select) => ({\r\n                innerBlocks: select('core/block-editor').getBlocks(clientId),\r\n            }),\r\n            [clientId]\r\n        );\r\n        const { replaceInnerBlocks } = useDispatch('core/block-editor');\r\n\r\n        useEffect(() => {\r\n            if (hasMigrated.current) {\r\n                return;\r\n            }\r\n\r\n            if (innerBlocks.length > 0) {\r\n                hasMigrated.current = true;\r\n                return;\r\n            }\r\n\r\n            const generatedBlocks = [];\r\n\r\n            if (headline) {\r\n                generatedBlocks.push(\r\n                    createBlock('core/heading', {\r\n                        level: 2,\r\n                        className: 'section-title',\r\n                        content: headline,\r\n                    })\r\n                );\r\n            }\r\n\r\n            if (buttonText || buttonLink) {\r\n                const button = createBlock('core/button', {\r\n                    className: 'cta-button',\r\n                    text: buttonText || defaultButtonText,\r\n                    url: buttonLink || undefined,\r\n                });\r\n\r\n                const buttonsWrapper = createBlock(\r\n                    'core/buttons',\r\n                    {\r\n                        layout: {\r\n                            type: 'flex',\r\n                            justifyContent: 'center',\r\n                        },\r\n                    },\r\n                    [button]\r\n                );\r\n\r\n                generatedBlocks.push(buttonsWrapper);\r\n            }\r\n\r\n            if (generatedBlocks.length === 0) {\r\n                return;\r\n            }\r\n\r\n            replaceInnerBlocks(clientId, generatedBlocks, false);\r\n            hasMigrated.current = true;\r\n        }, [\r\n            buttonLink,\r\n            buttonText,\r\n            clientId,\r\n            headline,\r\n            innerBlocks.length,\r\n            replaceInnerBlocks,\r\n        ]);\r\n\r\n        return (\r\n            <>\r\n                <section {...blockProps}>\r\n                    <div className=\"container\">\r\n                        <InnerBlocks\r\n                            allowedBlocks={ allowedCtaBlocks }\r\n                            template={ ctaTemplate }\r\n                            templateLock={ ctaTemplateLock }\r\n                        />\r\n                    </div>\r\n                </section>\r\n            </>\r\n        );\r\n    },\r\n    save() {\r\n        return <InnerBlocks.Content />;\r\n    },\r\n});\r\n"],"names":["window","defaultHeadline","_metadata$attributes$","metadata","attributes","headline","default","defaultButtonText","_metadata$attributes$2","buttonText","__","defaultButtonLink","_metadata$attributes$3","buttonLink","innerBlocks","allowedBlocks","allowedCtaBlocks","template","ctaTemplate","level","className","placeholder","content","layout","type","justifyContent","text","url","templateLock","ctaTemplateLock","registerBlockType","edit","clientId","blockProps","useBlockProps","hasMigrated","useRef","useSelect","select","getBlocks","replaceInnerBlocks","useDispatch","useEffect","current","length","generatedBlocks","push","createBlock","button","undefined","buttonsWrapper","createElement","Fragment","InnerBlocks","save","Content"],"sourceRoot":""}